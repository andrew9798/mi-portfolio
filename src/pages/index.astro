---
const supportedLangs = ["es", "en", "de"];

// Leer el idioma del navegador
const acceptLanguage = Astro.request.headers.get("accept-language");

// Ej: "de-DE,de;q=0.9,en;q=0.8"
const browserLang = acceptLanguage?.split(",")[0]?.slice(0, 2);

// Elegir idioma final
const lang = supportedLangs.includes(browserLang)
  ? browserLang
  : "es";

// Redirecci√≥n
return Astro.redirect(`/${lang}`);
---